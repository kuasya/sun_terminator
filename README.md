# sun_terminator
calculation of the coordinates of the solar terminator

## Введение

Солнечный терминатор — это граница, разделяющая освещенную и неосвещенную области на планете. Данное веб-приложение позволяет вычислять координаты солнечного терминатора в зависимости от времени суток и положения Солнца относительно Земли.

- - Разработана математическая модель, которая учитывает положение Солнца относительно Земли и вычисляет координаты терминатора в зависимости от времени суток.
- - Реализована серверная часть на FastAPI 

Входные данные: дата и время
Выходные данные: двумерный массив с координатами терминатора в формате широта-долгота 

## Установка

### Предварительные требования

- Python 3.7 или выше
- Установленные библиотеки:
  - numpy
  - skyfield
  - astropy
  - fastapi
  - uvicorn (для запуска сервера)

### Установка зависимостей

pip install numpy skyfield astropy fastapi uvicorn


## Запуск приложения

Для запуска веб-сервера выполните следующую команду:

uvicorn app_terminator:app --reload


где app_terminator — это имя вашего файла с кодом приложения, а app — экземпляр FastAPI.

## Использование API

**POST /get_coordinates**

#### Описание

Этот эндпоинт принимает дату и время в формате ISO 8601 и возвращает двумерный массив с координатами терминатора в формате широта-долгота.

#### Запрос

**Тело запроса:**

{
    "datetime": "2023-10-01 12-00-00"
}


- datetime: строка, представляющая дату и время.

#### Ответ

**Успешный ответ (200 OK):**

{
    "terminator_coordinates": [
        [latitude1, longitude1],
        [latitude2, longitude2],
        ...
    ]
}


- terminator_coordinates: массив координат терминатора, где каждая точка представлена широтой и долготой.

**Пример ответа:**

{
    "terminator_coordinates": [
        [40.7128, -74.0060],
        [34.0522, -118.2437]
    ]
}


### Пример запроса с использованием cURL

curl -X POST "http://localhost:8000/get_coordinates" \
-H "Content-Type: application/json" \
-d '{"datetime": "2023-10-01T12:00:00Z"}'


## Алгоритм вычисления координат терминатора

1. **Получение координат Солнца и Земли**: Используется набор данных DE421 для получения точных координат.
2. **Вычисление субточки Солнца**: Перевод геоцентрических координат в широту и долготу.
3. **Расчет угла**: Определение угла между осью Земли и линией Земля-Солнце.
4. **Генерация точек терминатора**: Для каждого угла используется матрица поворота для нахождения координат.
5. **Преобразование координат**: Конвертация из трехмерного пространства (X, Y, Z) в широту и долготу.






 
